# 10일

`Data Source` [http://data.seoul.go.kr/dataList/OA-15248/F/1/datasetView.do](http://data.seoul.go.kr/dataList/OA-15248/F/1/datasetView.do)

```
data_raw <- read.csv("C:/Users/User/Downloads/bike_2206.csv")
head(data_raw)
```

```
##   대여일자 대여소번호 대여소명 대여구분코드 성별 연령대코드 이용건수 운동량
## 1  2022-06          3 중랑센터 일일(비회원)  \\N       기타        1  29.34
## 2  2022-06          3 중랑센터   일일(회원)    M       50대       19 458.11
## 3  2022-06          3 중랑센터         정기  \\N       20대       12 330.13
## 4  2022-06          3 중랑센터         정기  \\N       60대        4 113.53
## 5  2022-06          3 중랑센터         정기    M       20대        2  13.69
## 6  2022-06          3 중랑센터         정기    M       40대       12 622.21
##   탄소량 이동거리.M. 이용시간.분.
## 1   0.26     1140.00            6
## 2   4.44    19280.00          117
## 3   3.39    14626.81           75
## 4   1.02     4410.69           22
## 5   0.07      320.00            4
## 6   4.54    19557.91          120
```

```
data <- data_raw
data %>% str
```

```
## 'data.frame':    133101 obs. of  11 variables:
##  $ 대여일자    : chr  "2022-06" "2022-06" "2022-06" "2022-06" ...
##  $ 대여소번호  : int  3 3 3 3 3 3 3 3 3 5 ...
##  $ 대여소명    : chr  "중랑센터" "중랑센터" "중랑센터" "중랑센터" ...
##  $ 대여구분코드: chr  "일일(비회원)" "일일(회원)" "정기" "정기" ...
##  $ 성별        : chr  "\\N" "M" "\\N" "\\N" ...
##  $ 연령대코드  : chr  "기타" "50대" "20대" "60대" ...
##  $ 이용건수    : int  1 19 12 4 2 12 12 4 1 15 ...
##  $ 운동량      : chr  "29.34" "458.11" "330.13" "113.53" ...
##  $ 탄소량      : chr  "0.26" "4.44" "3.39" "1.02" ...
##  $ 이동거리.M. : num  1140 19280 14627 4411 320 ...
##  $ 이용시간.분.: int  6 117 75 22 4 120 293 147 41 329 ...
```

```
data %>% 
  summarise(across(everything(), ~n_distinct(.))) %>% t()
```

```
##                [,1]
## 대여일자          1
## 대여소번호     2638
## 대여소명       2638
## 대여구분코드      5
## 성별              6
## 연령대코드        8
## 이용건수        705
## 운동량       102306
## 탄소량        13104
## 이동거리.M.  120566
## 이용시간.분.   6597
```

```
data %>% 
  distinct(성별)
```

```
##   성별
## 1  \\N
## 2    M
## 3    F
## 4     
## 5    m
## 6    f
```

```
data1 <- data %>% 
  mutate(성별 = ifelse(성별 %in% c("M", "m"), "male", 성별)) %>% 
  mutate(성별 = ifelse(성별 %in% c("F", "f"), "female", 성별)) %>% 
  mutate(성별 = ifelse(성별 %in% c("\\N", ""), "unkown", 성별))
```

```
data1 %>% 
  group_by(성별) %>% 
  summarise(n = n())
```

```
## # A tibble: 3 x 2
##   성별       n
##   <chr>  <int>
## 1 female 36978
## 2 male   40701
## 3 unkown 55422
```

```
data1 %>% 
  group_by(대여소번호, 대여소명) %>% 
  summarise(총이용건수 = sum(이용건수), 
            평균이동거리 = mean(이동거리.M., na.rm = T)/총이용건수) %>% 
  arrange(-총이용건수, -평균이동거리)
```

```
## `summarise()` has grouped output by '대여소번호'. You can override using the
## `.groups` argument.
```

```
## # A tibble: 2,638 x 4
## # Groups:   대여소번호 [2,638]
##    대여소번호 대여소명                               총이용건수 평균이동거리
##         <int> <chr>                                       <int>        <dbl>
##  1       2715 "2715.마곡나루역 2번 출구 "                 16494         22.0
##  2       4217 "4217. 한강공원 망원나들목"                 15412         61.6
##  3        502 "502. 뚝섬유원지역 1번출구 앞"              14120         55.8
##  4       2102 "2102. 봉림교 교통섬"                       13719         48.2
##  5        207 "207. 여의나루역 1번출구 앞"                13574         66.7
##  6       1210 "1210. 롯데월드타워(잠실역2번출구 쪽)"      11777         30.0
##  7       1911 "1911. 구로디지털단지역 앞"                 10369         49.5
##  8       2177 "2177. 신대방역 2번 출구"                   10006         41.5
##  9       2701 "2701. 마곡나루역 5번출구 뒤편"              9718         17.2
## 10       1153 "1153. 발산역 1번, 9번 인근 대여소"          9451         24.2
## # ... with 2,628 more rows
```

```
data1 %>% 
  group_by(대여소번호) %>% 
  select(대여소번호, 대여소명, 이용건수, 이동거리.M.) %>% 
  mutate(평균이동거리 = 이동거리.M./이용건수) %>% 
  filter(평균이동거리 > 10000) %>% 
  arrange(-평균이동거리)
```

```
## # A tibble: 2,559 x 5
## # Groups:   대여소번호 [1,406]
##    대여소번호 대여소명                               이용건수 이동거리~1 평균~2
##         <int> <chr>                                     <int>      <dbl>  <dbl>
##  1       2343 "2343. 세곡사거리 대왕파출소 앞"              1     53080  53080 
##  2       1269 "1269. 리센츠아파트 "                         2     98970  49485 
##  3       2140 "2140. 신림1교 교차로"                        2     91280  45640 
##  4       4483 "4483. 잠실나들목4"                           5    204229. 40846.
##  5       1659 "1659. 중계동 을지중학교"                     2     77419. 38709.
##  6       5752 "5752. 풍납백제문화공원 옆 인근"              1     37240  37240 
##  7        483 "483.남산타운아파트 버스정류장"               1     36910  36910 
##  8       4319 "4319. 삼성전자R&D어린이집 뒤"                1     36428. 36428.
##  9       4251 "4251. 공덕역 경의선숲길 커뮤니티센터"        2     72347  36174.
## 10       3627 "3627. 압구정나들목"                          1     35350  35350 
## # ... with 2,549 more rows, and abbreviated variable names 1: 이동거리.M.,
## #   2: 평균이동거리
```
